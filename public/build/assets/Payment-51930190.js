import{_ as S}from"./AppLayout-c54d894e.js";import{s as w,d as c,x,M as E,Z as $,y as N,k as D,o as h,e as b,r as I,f as k,_ as v,$ as M,a0 as P,a as o,l as C,G as F,b as y,w as O,u as g,F as B,c as R}from"./app-b6984dda.js";import"./ApplicationMark-f1917df9.js";import"./_plugin-vue_export-helper-c27b6911.js";const f={STRIPE_NOT_LOADED:"Stripe v3 library is not loaded",INSTANCE_NOT_DEFINED:"Instance object is not defined. Make sure you initialized Stripe before creating elements",ELEMENTS_NOT_DEFINED:"Elements object is not defined. You can't create stripe element without it",ELEMENT_TYPE_NOT_DEFINED:"elementType is required. You can't create stripe element without it"},U=(e,s)=>{try{if(!window.Stripe)throw new Error(f.STRIPE_NOT_LOADED);return window.Stripe(e,s)}catch(t){return console.error(t),t}},j=(e,s)=>{try{if(!e)throw new Error(f.INSTANCE_NOT_DEFINED);return e.elements(s)}catch(t){return console.error(t),t}},L=(e,s,t)=>{try{if(!e)throw new Error(f.ELEMENTS_NOT_DEFINED);if(!s)throw new Error(f.ELEMENT_TYPE_NOT_DEFINED);return e.create(s,t)}catch(n){return console.error(n),n}};var T=(e,s)=>{const t=e.__vccOpts||e;for(const[n,l]of s)t[n]=l;return t};const Y=w({name:"StripeElement",props:{elements:{type:Object,required:!0},type:{type:String,default:()=>"card"},options:{type:Object,default:()=>({})}},setup(e,{emit:s}){const t=c(document.createElement("div")),n=c(),l=c(),{elements:a,type:m,options:d}=x(e);return E(()=>{const p=()=>{n.value=L(a.value,m.value,d.value),n.value.mount(t.value),l.value.appendChild(t.value)},_=(i,u)=>{s(i,u)},r=()=>{["change","ready","focus","blur","click","escape"].forEach(u=>{n.value.on(u,_.bind(null,u))})};try{p(),r()}catch(i){console.error(i)}}),$(()=>{var p,_;(p=n.value)==null||p.unmount(),(_=n.value)==null||_.destroy()}),N(d,()=>{var p;(p=n.value)==null||p.update(e.options)}),{stripeElement:n,domElement:t,mountPoint:l}}}),q={ref:"mountPoint"};function A(e,s,t,n,l,a){return h(),b("div",q,null,512)}var Q=T(Y,[["render",A]]);const G=w({name:"StripeElements",props:{stripeKey:{type:String,required:!0},instanceOptions:{type:Object,default:()=>({})},elementsOptions:{type:Object,default:()=>({})}},setup(e){const{stripeKey:s,instanceOptions:t,elementsOptions:n}=x(e),l=c(),a=c(),m=D(()=>a.value?Object.keys(a.value).length>0:!1);return E(()=>{l.value=U(s.value,t.value),a.value=j(l.value,n.value)}),N(n,()=>{var d;(d=a.value)==null||d.update(n.value)}),{elements:a,instance:l,elementsUsable:m}}}),V={key:0};function W(e,s,t,n,l,a){return e.elementsUsable?(h(),b("div",V,[I(e.$slots,"default",{instance:e.instance,elements:e.elements})])):k("",!0)}var z=T(G,[["render",W]]);const K=o("div",{class:"flex flex-col text-center w-full mt-12"},[o("h1",{class:"text-3xl font-bold title-font text-gray-900"},"Subscribe to mylinx Pro "),o("p",{class:"font-light"},"for a much richer link-in-bio experience")],-1),J={class:"px-4 pb-24"},X={class:"flex w-full lg:w-1/2 md:w-3/4 bg-white mx-auto mt-12 p-6 rounded-xl"},H={class:"flex flex-col w-full"},Z=o("div",{class:"flex flex-row w-full px-4 py-4 bg-[#ffff00] rounded-xl font-bold mb-4"},[o("div",{class:"w-1/2"},"Plan: mylinx PRO (Monthly)"),o("div",{class:"w-1/2 text-right"},"$3.5 / month")],-1),ee=o("input",{type:"hidden",name:"plan",value:"{{ request('plan') }}"},null,-1),te=o("label",null,"Name on card",-1),ne=o("label",null,"Card Details",-1),se={class:"rounded-lg mt-2 bg-gray-100 h-12 flex items-center px-4 focus:ring-0 border-0"},oe=["data-secret"],re=o("div",{class:"text-center text-sm font-light mt-2"},"You will be charged $3.5 per month",-1),le={__name:"Payment",setup(e){const s=c("pk_test_51NMUkFGRBlz0WO8MQ7qhjBidPt6Iyw0Q6cMT4pnrPxh0OBJv6cf4AgRG02W30hQcUIXasc9fFo7vUNsC6YmTeL1700m01c8t7y"),t=c(!1),n=c(),l=c(),a=c(null),m=c(null),d=c("");E(()=>{v.get("/get-setup-intent").then(r=>{a.value=r.data.intent.client_secret}).catch(r=>{console.log(r)}),v.get("/get-monthly-plan-id").then(r=>m.value=r.data).catch(r=>{console.log(r)})}),M(()=>{P(s.value).then(()=>{t.value=!0})});const p=async()=>{const r=n.value.stripeElement,{setupIntent:i,error:u}=await l.value.instance.confirmCardPayment(a.value,{payment_method:{card:r,billing_details:{name:d.value}}});u?console.log(u.message):_(i.payment_method)},_=async r=>{try{await v.post(route("/subscribe"),{plan:m,payment_method:r}),console.log(bg)}catch(i){console.log(i)}};return(r,i)=>(h(),b(B,null,[K,o("div",J,[o("div",X,[o("div",H,[Z,ee,te,C(o("input",{type:"text",name:"name",class:"h-12 mt-2 px-5 py-2.5 w-full focus:ring-0 border-0 bg-gray-100 mb-4 rounded-lg","onUpdate:modelValue":i[0]||(i[0]=u=>d.value=u),placeholder:"Name on card"},null,512),[[F,d.value]]),ne,o("div",se,[y(g(z),{class:"w-full",ref_key:"elms",ref:l,"stripe-key":"pk_test_51NMUkFGRBlz0WO8MQ7qhjBidPt6Iyw0Q6cMT4pnrPxh0OBJv6cf4AgRG02W30hQcUIXasc9fFo7vUNsC6YmTeL1700m01c8t7y"},{default:O(({elements:u,instance:ae})=>[y(g(Q),{ref_key:"card",ref:n,elements:u},null,8,["elements"])]),_:1},512)]),o("button",{type:"button",onClick:p,class:"w-full h-12 bg-indigo-500 rounded-lg mt-4 text-white font-bold","data-secret":this.clientSecret},"Charge My Card and Subscribe",8,oe),re])])])],64))}},pe={__name:"Payment",setup(e){return(s,t)=>(h(),R(S,{title:"Design"},{default:O(()=>[y(le)]),_:1}))}};export{pe as default};
